# PROJECT OVERVIEW
- Online learning platform "MÄciesTe" that connects students with teachers for private lessons
- ALL CONTENT IS IN LATVIAN
- Write answers and comments in English
# PERSONALITY
- Educational, friendly, as senior developer

# TECH STACK
- Next.js 15 with App Router
- Clerk (Auth)
- SUPABASE (DB, Storage)
- TypeScript
- TailwindCSS with DaisyUI
- React Hook Form
- Zod validation

# AUTH SETUP
- Clerk handles all authentication
- Supabase uses Clerk JWT for RLS
- No Supabase Auth or cookies needed
- Webhook syncs Clerk users to Supabase profiles

# ERROR FIXING PROCESS
step 1: explain the error in simple terms
step 2: explain the solution in simple terms
step 3: show how to fix the error
step 4: give suggestions for next step if needed

# BUILDING PROCESS
- npm install
- npm run dev
- npm run build
- npm start

# Our .env variables
.env.local
```env
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/login
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/register
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/

NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_key
```

# CURRENT FILE STRUCTURE
instructions\proposedFileStructure.md (this is changing constantly, BUT IMPORTANT IS TO USE BEST PRACTICES)

ğŸ“ ROOT
â”œâ”€â”€ ğŸ“ app/
â”‚   â”œâ”€â”€ ğŸ“ (auth)/                    # Clerk Authentication routes
â”‚   â”‚   â”œâ”€â”€ ğŸ“ login/                 # Clerk Sign In
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ register/              # Clerk Sign Up
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ sso-callback/          # Clerk SSO callback
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx                # Auth layout
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ api/                       # API routes
â”‚   â”‚   â”œâ”€â”€ ğŸ“ webhooks/              # Webhook handlers
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ clerk/             # Clerk webhook
â”‚   â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ lessons/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â””â”€â”€ ğŸ“ bookings/
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ (dashboard)/               # Dashboard route group
â”‚   â”‚   â”œâ”€â”€ ğŸ“ student/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ lessons/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ bookings/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ teacher/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ schedule/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ lessons/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â”œâ”€â”€ template.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ (lessons)/                 # Lessons route group
â”‚   â”‚   â”œâ”€â”€ ğŸ“ [category]/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ [subjectId]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ [lessonId]/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # Server component that imports client.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ client.tsx    # Client components with "use client"
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.ts   # Metadata generation
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ error.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ template.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # Server component that imports client.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ client.tsx        # Client components with "use client"
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.ts       # Metadata generation
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ error.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ template.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Server component that imports client.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ client.tsx            # Client components with "use client"
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.ts           # Metadata generation
â”‚   â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ error.tsx
â”‚   â”‚   â”‚   â””â”€â”€ template.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ meet/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [lessonId]/
â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx          # Server component that imports client.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ client.tsx        # Client components with "use client"
â”‚   â”‚   â”‚       â”œâ”€â”€ metadata.ts       # Metadata generation
â”‚   â”‚   â”‚       â”œâ”€â”€ loading.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ error.tsx
â”‚   â”‚   â”‚       â””â”€â”€ template.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx                # Lessons layout with provider
â”‚   â”‚   â”œâ”€â”€ loading.tsx               # Lessons loading state
â”‚   â”‚   â”œâ”€â”€ error.tsx                 # Lessons error boundary
â”‚   â”‚   â””â”€â”€ template.tsx              # Lessons metadata
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ (profiles)/                # Profile route group
â”‚   â”‚   â”œâ”€â”€ ğŸ“ teachers/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [slug]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ profile/                   # Profile pages
â”‚   â”‚   â”œâ”€â”€ ğŸ“ [userId]/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ buj/                       # FAQ/Help pages
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ error.tsx                     # Root error boundary
â”‚   â”œâ”€â”€ layout.tsx                    # Root layout
â”‚   â”œâ”€â”€ loading.tsx                   # Root loading state
â”‚   â”œâ”€â”€ page.tsx                      # Landing page
â”‚   â”œâ”€â”€ landingContent.tsx            # Landing page content
â”‚   â””â”€â”€ themeProvider.tsx             # Theme context provider
â”‚
â”œâ”€â”€ ğŸ“ features/                      # Feature-specific code
â”‚   â”œâ”€â”€ ğŸ“ auth/                      # Auth feature code
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SignInForm.tsx        # Clerk sign in form
â”‚   â”‚   â”‚   â”œâ”€â”€ SignUpForm.tsx        # Clerk sign up form
â”‚   â”‚   â”‚   â””â”€â”€ UserButton.tsx        # Clerk user button
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts            # Clerk auth hook
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ lessons/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ CourseSections.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateLessonModal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EditLessonModal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LessonDetails.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LessonForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StudentLessons.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useAvailableLessons.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useCategory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useLessonDetails.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useLessons.ts
â”‚   â”‚   â”‚   â””â”€â”€ useStudentLessons.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lessonService.ts
â”‚   â”‚   â”‚   â””â”€â”€ bookingService.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lesson.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ booking.ts
â”‚   â”‚   â”‚   â””â”€â”€ category.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dateHelpers.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.ts
â”‚   â”‚   â”‚   â””â”€â”€ lessonHelpers.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ bookings/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ BookingCalendar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TeacherBookings.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StudentBookings.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TimeSlotPicker.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ useBookings.ts
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ payments/
â”‚       â”œâ”€â”€ ğŸ“ components/
â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â””â”€â”€ PaymentModal.tsx
â”‚       â”œâ”€â”€ ğŸ“ hooks/
â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â””â”€â”€ usePayment.ts
â”‚       â””â”€â”€ types.ts
â”‚
â”œâ”€â”€ ğŸ“ shared/                        # Shared code
â”‚   â”œâ”€â”€ ğŸ“ components/                # Truly shared components
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/                    # Basic UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ SEO/                   # SEO components
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ DynamicMetadata.tsx
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â””â”€â”€ UserInfoModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/                     # Common hooks
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ useToast.ts
â”‚   â”‚   â””â”€â”€ useMediaQuery.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                     # Utilities
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ date-helpers.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ types/                     # Shared types
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ common.ts
â”‚       â””â”€â”€ lesson.ts
â”‚
â”œâ”€â”€ ğŸ“ lib/                           # External services
â”‚   â”œâ”€â”€ ğŸ“ clerk/                     # Clerk helpers
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ supabase/                  # Supabase config
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ db.ts                     # Re-export client for easier imports
â”‚   â”‚   â”œâ”€â”€ client.ts                 # Client setup
â”‚   â”‚   â””â”€â”€ server.ts                 # Server setup
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ google/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ calendar.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ fetchCategories.ts
â”‚   â”œâ”€â”€ fetchLessons.ts
â”‚   â””â”€â”€ fetchSubjects.ts
â”‚
â”œâ”€â”€ ğŸ“ config/                        # App configuration
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ constants.ts
â”‚   â”œâ”€â”€ routes.ts
â”‚   â””â”€â”€ site.ts
â”‚
â”œâ”€â”€ ğŸ“ public/                        # Static files
â”‚   â”œâ”€â”€ ğŸ“ images/
â”‚   â”œâ”€â”€ ğŸ“ icons/
â”‚   â”œâ”€â”€ file.svg
â”‚   â”œâ”€â”€ globe.svg
â”‚   â”œâ”€â”€ next.svg
â”‚   â”œâ”€â”€ vercel.svg
â”‚   â””â”€â”€ window.svg
â”‚
â”œâ”€â”€ ğŸ“ instructions/                  # Project documentation
â”‚   â”œâ”€â”€ helperPromts.md
â”‚   â”œâ”€â”€ roadmap.md
â”‚   â””â”€â”€ proposedFileStructure.md
â”‚
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env.local
â”œâ”€â”€ .cursorignore
â”œâ”€â”€ .cursorrules
â”œâ”€â”€ .gitignore
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ README.md
â””â”€â”€ middleware.ts                    # Clerk middleware


# GITHUB PUSH PROCESS
- git add .
- git commit -m "descriptive message"
- git push origin main

# IMPORTANT DEVELOPMENT GUIDELINES
- ALL UI IS IN LATVIAN
- Test thoroughly file compatibility and ensure all files work together seamlessly
- Write clean, readable, and well-structured code following DRY principles
- Follow TypeScript and Next.js best practices and conventions
- Ensure all TypeScript types are properly defined and errors are resolved
- Use meaningful variable names and add appropriate comments
- Implement proper error handling and logging
- Follow the project's coding style and patterns
- Use Clerk for all auth-related functionality
- Use Supabase only for database and storage
- Ensure RLS policies work with Clerk JWT

# AUTH FLOW
1. User signs in/up with Clerk
2. Clerk webhook creates/updates Supabase profile
3. Clerk JWT used for Supabase RLS policies
4. No direct Supabase Auth interaction needed

# DATABASE ACCESS
- Client-side: Use supabase client with RLS
- Server-side: Use createServerSupabaseClient
- Admin tasks: Use supabaseAdmin

# OTHER CONTEXT
DB STRUCTURE
supabase\schema.sql

# COMMENTS
- make sure to ALWAYS include comments in your code
- do not delete comments unless they are no longer needed



